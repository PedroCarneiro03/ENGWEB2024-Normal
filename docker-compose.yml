version: '3'

services:
  mongodb:
    image: mongo:latest
    container_name: mongodb
    restart: always
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db

  api-dados:
    build:
      context: ./caminho/para/api-dados
      dockerfile: Dockerfile-api-dados
    container_name: api-dados
    restart: always
    environment:
      MONGO_URI: mongodb://mongodb:27017/minha-base-de-dados
    ports:
      - "3000:3000"

  interface:
    build:
      context: ./caminho/para/interface
      dockerfile: Dockerfile-api-interfaces
    container_name: interface
    restart: always
    ports:
      - "80:80"
    environment:
      REACT_APP_API_URL: http://api-dados:3000